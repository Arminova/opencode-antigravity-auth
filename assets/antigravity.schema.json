{
  "$ref": "#/definitions/AntigravityConfig",
  "definitions": {
    "AntigravityConfig": {
      "type": "object",
      "properties": {
        "$schema": {
          "type": "string"
        },
        "quiet_mode": {
          "type": "boolean",
          "default": false,
          "description": "Suppress most toast notifications (rate limit, account switching). Recovery toasts always shown. Env: OPENCODE_ANTIGRAVITY_QUIET=1"
        },
        "debug": {
          "type": "boolean",
          "default": false,
          "description": "Enable debug logging to file. Env: OPENCODE_ANTIGRAVITY_DEBUG=1 (or =2 for verbose)"
        },
        "log_dir": {
          "type": "string",
          "description": "Custom directory for debug logs. Env: OPENCODE_ANTIGRAVITY_LOG_DIR=/path/to/logs"
        },
        "keep_thinking": {
          "type": "boolean",
          "default": false,
          "description": "Preserve thinking blocks for Claude models using signature caching. May cause signature errors. Env: OPENCODE_ANTIGRAVITY_KEEP_THINKING=1"
        },
        "session_recovery": {
          "type": "boolean",
          "default": true,
          "description": "Enable automatic session recovery from tool_result_missing errors. Env: OPENCODE_ANTIGRAVITY_SESSION_RECOVERY=1"
        },
        "auto_resume": {
          "type": "boolean",
          "default": true,
          "description": "Automatically send resume prompt after successful recovery. Env: OPENCODE_ANTIGRAVITY_AUTO_RESUME=1"
        },
        "resume_text": {
          "type": "string",
          "default": "continue",
          "description": "Custom text to send when auto-resuming after recovery. Env: OPENCODE_ANTIGRAVITY_RESUME_TEXT=continue"
        },
        "signature_cache": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true,
              "description": "Enable disk caching of thinking block signatures."
            },
            "memory_ttl_seconds": {
              "type": "number",
              "minimum": 60,
              "maximum": 86400,
              "default": 3600,
              "description": "In-memory TTL in seconds."
            },
            "disk_ttl_seconds": {
              "type": "number",
              "minimum": 3600,
              "maximum": 604800,
              "default": 172800,
              "description": "Disk TTL in seconds."
            },
            "write_interval_seconds": {
              "type": "number",
              "minimum": 10,
              "maximum": 600,
              "default": 60,
              "description": "Background write interval in seconds."
            }
          },
          "additionalProperties": false,
          "description": "Signature cache configuration for persisting thinking block signatures. Only used when keep_thinking is enabled."
        },
        "empty_response_max_attempts": {
          "type": "number",
          "minimum": 1,
          "maximum": 10,
          "default": 4,
          "description": "Maximum retry attempts when Antigravity returns an empty response (no candidates)."
        },
        "empty_response_retry_delay_ms": {
          "type": "number",
          "minimum": 500,
          "maximum": 10000,
          "default": 2000,
          "description": "Delay in milliseconds between empty response retries."
        },
        "tool_id_recovery": {
          "type": "boolean",
          "default": true,
          "description": "Enable tool ID orphan recovery. Matches mismatched tool responses by function name or creates placeholders."
        },
        "claude_tool_hardening": {
          "type": "boolean",
          "default": true,
          "description": "Enable tool hallucination prevention for Claude models. Injects parameter signatures and strict usage rules."
        },
        "proactive_token_refresh": {
          "type": "boolean",
          "default": true,
          "description": "Enable proactive background token refresh before expiry, ensuring requests never block."
        },
        "proactive_refresh_buffer_seconds": {
          "type": "number",
          "minimum": 60,
          "maximum": 7200,
          "default": 1800,
          "description": "Seconds before token expiry to trigger proactive refresh."
        },
        "proactive_refresh_check_interval_seconds": {
          "type": "number",
          "minimum": 30,
          "maximum": 1800,
          "default": 300,
          "description": "Interval between proactive refresh checks in seconds."
        },
        "auto_update": {
          "type": "boolean",
          "default": true,
          "description": "Enable automatic plugin updates. Env: OPENCODE_ANTIGRAVITY_AUTO_UPDATE=1"
        }
      },
      "additionalProperties": false
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#"
}
